

if ( file_exists("config.json")  != true ) {
	echo "\033[1;32mNhập vào PHPSESSID : ";
	$PHPSESSID = trim(fgets(STDIN));
	echo "\033[1;32mNhập vào cookie facebook : ";
	$cookie = trim(fgets(STDIN));
	echo "\033[1;32mNhập vào id facebook : ";
	$account_id = trim(fgets(STDIN));
	$file = fopen("config.json","a+");
	fwrite($file,'{
"PHPSESSID":"'.$PHPSESSID.'",
"cookie":"'.$cookie.'",
"account_id":"'.$account_id.'"
}');
fclose($file);
}
$__cfduid = "__cfduid=d8129be9f78b59a04120bf79f49246ad91595234205";
$data = json_decode(fread(fopen("config.json","r"),filesize("config.json")),true);
$PHPSESSID = $data["PHPSESSID"];
$cookie = $data["cookie"];
$account_id = $data["account_id"];
echo $cookie;
if ( strpos($PHPSESSID,"=") != true) {
	echo "\033[1;33m Config Sai định dạng !!!!\n";
	system("rm config.json");
	exit();
}
system("clear");
echo "\033[1;32m▄▄▄   ▄▄   ▄▄▄         ▄▄▄▄▄  ▄▄   ▄▄  ▄   \n";
echo "\033[1;33m█  █ █▄▄█ █     ▄▄▄▄     █   █  █ █  █ █   \n";
echo "\033[1;31m█▄▄▀ █  █ ▀▄▄█           █   ▀▄▄▀ ▀▄▄▀ █▄▄▄\n";
echo "\033[1;37m- - - - - - - - - - - - - - - - - - - - - - \n";
echo "\033[1;44m \033[1;31m●\033[;33m Tool Auto TTC - Version 1.0 \033[1;31m● \n\n\033[0m";
echo "\033[1;32mNhập Time Delay : ";
$time = trim(fgets(STDIN));

while(true){
$info = listpost($PHPSESSID,$__cfduid);
foreach ($info as $info){
	$post_id = $info["idpost"];
	follow($post_id,$account_id,$cookie);
	sleep(2);
	$hoanthanh = hoanthanh($post_id,$PHPSESSID,$__cfduid);
	$suc = $hoanthanh["mess"];
	$err = $hoanthanh["error"];
	if (strlen($suc) >10 ) {
		echo "\033[1;37m~\033[1;31m[\033[1;32m✓\033[1;31m]\033[1;37m => \033[1;32m$suc\n";
	}else{
		echo "\033[1;37m~\033[1;33m[\033[1;31m✘\033[1;33m] \033[1;37m=> \033[1;31m$err\n";
	}
if ($time < 0) {
sleep(1);
} else {
sleep($time);
}

}

}
function listpost($PHPSESSID,$__cfduid){
	$url = "https://tuongtaccheo.com/kiemtien/subcheo/getpost.php";
	$head = array (
		"Host: tuongtaccheo.com",
		"accept: application/json, text/javascript, *"."/"."*; q=0.01",
		"x-requested-with: XMLHttpRequest",
		"user-agent: Mozilla/5.0 (Linux; Android 5.1.1; SM-J320G) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.106 Mobile Safari/537.36",
		"referer: https://tuongtaccheo.com/kiemtien/subcheo/",
		"cookie: ".$__cfduid,
		"cookie: ".$PHPSESSID,
	);
	$ch = curl_init();
	curl_setopt_array ($ch, array (
		CURLOPT_URL => $url,
		CURLOPT_FOLLOWLOCATION => TRUE,
		CURLOPT_RETURNTRANSFER => 1,
		CURLOPT_POST => 1,
		CURLOPT_HTTPGET => true,
		CURLOPT_SSL_VERIFYPEER => 0,
		CURLOPT_HTTPHEADER => $head,
		CURLOPT_ENCODING => TRUE
	));
	return json_decode(curl_exec($ch),true);
}

function hoanthanh($post_id,$PHPSESSID,$__cfduid){
	$url = "https://tuongtaccheo.com/kiemtien/subcheo/nhantien.php";
	$data = "id=".$post_id;
	$head = array (
		"Host: tuongtaccheo.com",
		"content-length: ".strlen($data),
		"x-requested-with: XMLHttpRequest",
		"user-agent: Mozilla/5.0 (Linux; Android 5.1.1; SM-J320G) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.106 Mobile Safari/537.36",
		"content-type: application/x-www-form-urlencoded; charset=UTF-8",
		"origin: https://tuongtaccheo.com",
		"referer: https://tuongtaccheo.com/kiemtien/subcheo/",
		"cookie: ".$__cfduid,
		"cookie: ".$PHPSESSID,
		"cookie: TawkConnectionTime=0"

	);
	$ch = curl_init();
	curl_setopt_array ($ch, array (
		CURLOPT_URL => $url,
		CURLOPT_FOLLOWLOCATION => TRUE,
		CURLOPT_RETURNTRANSFER => 1,
		CURLOPT_POST => 1,
		CURLOPT_POSTFIELDS => $data,
		CURLOPT_SSL_VERIFYPEER => 0,
		CURLOPT_HTTPHEADER => $head,
		CURLOPT_ENCODING => TRUE
	));
	$a = json_decode(curl_exec($ch),true);
	return $a;
}



function follow($post_id,$account_id,$cookie){
        $url = "https://mbasic.facebook.com/".$post_id;
        $head = array (
        "Host: mbasic.facebook.com",
        "upgrade-insecure-requests: 1",
        "save-data: on",
        "user-agent: Mozilla/5.0 (Linux; Android 5.1.1; SM-J320G) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.106 Mobile Safari/537.36",
        "accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*"."/"."*;q=0.8,application/signed-exchange;v=b3;q=0.9",
        "sec-fetch-site: same-origin",
        "sec-fetch-mode: navigate",
        "sec-fetch-user: ?1",
        "sec-fetch-dest: document",
        "accept-language: vi-VN,vi;q=0.9,fr-FR;q=0.8,fr;q=0.7,en-US;q=0.6,en;q=0.5",
        "cookie: locale=pt_BR",
        "cookie: c_user=".$account_id,
        "cookie: ".$cookie,
        "cookie: wd=360x559");
        $ch = curl_init();
        curl_setopt_array ($ch, array (
        CURLOPT_URL => $url,
        CURLOPT_FOLLOWLOCATION => false,
        CURLOPT_RETURNTRANSFER => 1,
        CURLOPT_POST => 1,
        CURLOPT_HTTPGET => true,
        CURLOPT_SSL_VERIFYPEER => 0,
        CURLOPT_HTTPHEADER => $head,
        CURLOPT_HEADER => true,
        CURLOPT_ENCODING => TRUE));
        $data = curl_exec($ch);
        if (strpos($data,"xs=deleted") == true){
                echo "\033[1;37m~\033[1;33m[\033[1;31m✘\033[1;33m] \033[1;37m=> \033[1;31mPhiên Bản Cookie Hết Hạn !!!!\n";
        } else {
        $one = explode("location: ",$data);
        $two = explode("rdr",$one[1]);
        $url = $two[0]."rdr";
        curl_setopt_array ($ch, array (
        CURLOPT_URL => $url,
        CURLOPT_FOLLOWLOCATION => false,
        CURLOPT_RETURNTRANSFER => 1,
        CURLOPT_POST => 1,
        CURLOPT_HTTPGET => true,
        CURLOPT_SSL_VERIFYPEER => 0,
        CURLOPT_HTTPHEADER => $head,
        CURLOPT_HEADER => true,
        CURLOPT_ENCODING => TRUE));
        $data = curl_exec($ch);
        $one = explode("/a/subscribe.php?",$data);
        $two = explode('"',$one[1]);

        $url = "https://mbasic.facebook.com/a/subscribe.php?".htmlspecialchars_decode($two[0]);
        curl_setopt_array ($ch, array (
        CURLOPT_URL => $url,
        CURLOPT_FOLLOWLOCATION => false,
        CURLOPT_RETURNTRANSFER => 1,
        CURLOPT_POST => 1,
        CURLOPT_HTTPGET => true,
        CURLOPT_SSL_VERIFYPEER => 0,
        CURLOPT_HTTPHEADER => $head,
        CURLOPT_HEADER => true,
        CURLOPT_ENCODING => TRUE));
        $data = curl_exec($ch);
        echo "\033[1;37m~\033[1;31m[\033[1;32m✓\033[1;31m]\033[1;37m => \033[0;35mĐã follow ID \033[1;37m=> \033[1;33m$post_id\n";
        }
}




